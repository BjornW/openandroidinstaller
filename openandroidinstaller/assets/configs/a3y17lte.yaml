metadata:
  maintainer: Tobias Sterbak (tsterbak)
  devicename: Samsung Galaxy A3 (2017)
  devicecode: a3y17lte
steps:
  unlock_bootloader:
  flash_recovery:
    - title: "Boot into bootloader"
      type: call_button
      content: >
        As a first step, you need to boot into the bootloader. A bootloader is the piece of software,
        that tells your phone who to start and run an operating system (like Android). Your device should be turned on.
        Then press 'Confirm and run' to reboot into the bootloader. Continue once it's done.
      command: "adb reboot download"
    - title: "Flash custom recovery"
      type: call_button
      content: >
        In this step, you need to flash a custom recovery on your device.
        Press 'Confirm and run' to start the process. Confirm afterwards to continue.
      command: "heimdall flash --no-reboot --RECOVERY <recovery>"
    - title: "Boot into recovery"
      type: confirm_button
      img: samsung-buttons.png
      content: >
        Unplug the USB cable from your device. Then manually reboot into recovery by pressing the *Volume Down* + *Power buttons* for 
        8~10 seconds until the screen turns black & release the buttons immediately when it does, then boot to recovery with the device powered off, 
        hold *Volume Up* + *Home* + *Power*.
  install_os:
    - title: "Flash LineageOS"
      type: call_button
      content: >
        This step will remove encryption and delete all files stored 
        in the internal storage. Confirm to format. Confirm when it's done.
      command: adb shell twrp format data
    - title: "Flash LineageOS"
      type: call_button
      content: Wipe cache.
      command: adb shell twrp wipe cache
    - title: "Flash LineageOS"
      type: call_button
      content: Wipe system
      command: adb shell twrp wipe system
    - title: "Flash LineageOS"
      type: call_button
      content: activate sideload
      command: adb shell twrp sideload
    - title: "Flash LineageOS"
      type: call_button
      content: >
        Now it's time to flash the LineageOS image. Don't remove the USB-Cable and press 'Confirm and run' to start! 
        This might take a while. Confirm after it's done.
      command: "adb sideload <image>"
    - title: "Flash LineageOS"
      type: call_button
      content: Wipe cache.
      command: adb shell twrp wipe cache
    - title: "Flash LineageOS"
      type: call_button
      content: Wipe dalvik cache 
      command: adb shell twrp wipe dalvik
    - title: "Reboot into LineageOS"
      type: call_button
      content: As a final step, reboot into LineageOS to finish the installation by pressing the button.
      command: adb shell twrp reboot 